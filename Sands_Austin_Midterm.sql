/*
File:   Sands_Austin_Midterm.sql
Author: Austin Sands
Date:   02/24/2022
Purpose: This file will create all tables and fill with sample data necessary 
to demonstrate
*/

SET DEFINE OFF

/*
CREATE TABLES       #3
*/

-- BASE table
CREATE TABLE AIRCRAFT_BASES (
BASE_CODE       CHAR(4) PRIMARY KEY,
BASE_NAME       VARCHAR(16) NOT NULL,
STREET_ADDRESS  VARCHAR(25) NOT NULL,
BASE_CITY       VARCHAR(16) NOT NULL,
BASE_STATE      CHAR(2) NOT NULL,
BASE_ZIP        NUMBER(5)
);

-- SKILL table
CREATE TABLE SKILL(
SKILL_LEVEL     NUMBER(1) PRIMARY KEY,
TITLE           VARCHAR(15) NOT NULL,
DESCRIPTION     VARCHAR(60) NOT NULL
);

-- SPECIALTIES table
CREATE TABLE SPECIALTIES(
SPECIALTY_CODE  CHAR(5) PRIMARY KEY,
TITLE           VARCHAR(12) NOT NULL,
DESCRIPTION     VARCHAR(50) NOT NULL
);

-- AIRCRAFT table
CREATE TABLE AIRCRAFT(
TAIL_NUMBER         CHAR(6) PRIMARY KEY,
AIRFRAME            VARCHAR(16) NOT NULL,
MISSION_CAPABLE     CHAR(1) DEFAULT 'Y' NOT NULL,
CREWCHIEF           NUMBER(5) NOT NULL,
BASE                CHAR(4) NOT NULL,
CONSTRAINT FK_AIRCRAFT_BASE FOREIGN KEY (BASE) REFERENCES AIRCRAFT_BASES(BASE_CODE)
);


-- MECHANIC table
CREATE TABLE MECHANIC (
EMPLOYEE_ID NUMBER(5) GENERATED ALWAYS AS IDENTITY START WITH 10000,
FIRST_NAME          VARCHAR(16) NOT NULL,
LAST_NAME           VARCHAR(16) NOT NULL,
ASSIGNED_AIRCRAFT   CHAR(6),
SPECIALTY           CHAR(5) NOT NULL,
SKILL_LEVEL         NUMBER(1) NOT NULL,
PRIMARY KEY (EMPLOYEE_ID),
CONSTRAINT FK_AIRCRAFT FOREIGN KEY (ASSIGNED_AIRCRAFT) REFERENCES AIRCRAFT(TAIL_NUMBER),
CONSTRAINT FK_SPECIALTY FOREIGN KEY (SPECIALTY) REFERENCES SPECIALTIES(SPECIALTY_CODE),
CONSTRAINT FK_SKILL FOREIGN KEY (SKILL_LEVEL) REFERENCES SKILL(SKILL_LEVEL)
);

-- MAINTENANCE TABLE
CREATE TABLE MAINTENANCE (
JOB_CONTROL_NUMBER  NUMBER(9) GENERATED ALWAYS AS IDENTITY START WITH 202200001,
AIRCRAFT            CHAR(6) NOT NULL,
FIND_MECHANIC       NUMBER(5) NOT NULL,
FIND_DATE           DATE NOT NULL,
ERROR_DESC          VARCHAR(280) NOT NULL,
FIX_MECHANIC        NUMBER(5),
FIX_DATE            DATE,
FIX_DESC            VARCHAR(280),
PRIMARY KEY (JOB_CONTROL_NUMBER),
CONSTRAINT FK_MAINT_AIRCRAFT FOREIGN KEY (AIRCRAFT) REFERENCES AIRCRAFT(TAIL_NUMBER),
CONSTRAINT FK_FIND FOREIGN KEY (FIND_MECHANIC) REFERENCES MECHANIC(EMPLOYEE_ID),
CONSTRAINT FK_FIX FOREIGN KEY (FIX_MECHANIC) REFERENCES MECHANIC(EMPLOYEE_ID),
CONSTRAINT CHK_DATE CHECK (FIX_DATE >= FIND_DATE)
);

-- INSPECTION_SCHEDULE table
CREATE TABLE INSPECTION_SCHEDULE (
INSPECTION_ID   NUMBER(4) GENERATED ALWAYS AS IDENTITY START WITH 6000,
AIRCRAFT        CHAR(6) NOT NULL,
DAYS_INTERVAL   NUMBER(3) NOT NULL,
DATE_LAST_INSP  DATE NOT NULL,
DATE_NEXT_INSP  AS (DATE_LAST_INSP + DAYS_INTERVAL),
PRIMARY KEY (INSPECTION_ID),
CONSTRAINT FK_INSP_AIRCRAFT FOREIGN KEY (AIRCRAFT) REFERENCES AIRCRAFT(TAIL_NUMBER)
);

-- AIRCRAFT_PARTS table
CREATE TABLE AIRCRAFT_PARTS (
PART_NUMBER CHAR(10) PRIMARY KEY,
PART_NAME   VARCHAR(50) NOT NULL,
PART_DESC   VARCHAR(280) NOT NULL,
PART_COST   NUMBER NOT NULL
);

-- REQUEST TYPES
CREATE TABLE REQUEST_TYPE (
REQUEST_CODE        NUMBER(1) PRIMARY KEY,
REQUEST_DESCRIPTION VARCHAR(50) NOT NULL
);


-- ANALYSIST REQUESTS
CREATE SEQUENCE REQUEST_SEQ START WITH 1 INCREMENT BY 1 NOCACHE;

CREATE TABLE ANALYSIST_REQUEST (
REQUEST_NUMBER NUMBER PRIMARY KEY,
REQUESTOR NUMBER(5) NOT NULL,
REQUEST_TYPE NUMBER(1) NOT NULL,
REQUEST VARCHAR(280) NOT NULL,
CONSTRAINT FK_REQUEST_EMP FOREIGN KEY (REQUESTOR) REFERENCES MECHANIC(EMPLOYEE_ID),
CONSTRAINT FK_REQUEST_TYPE FOREIGN KEY (REQUEST_TYPE) REFERENCES REQUEST_TYPE(REQUEST_CODE)
);

-- ORDER_PARTS TABLE
CREATE TABLE ORDER_PARTS (
ORDER_NUMBER    NUMBER(5) GENERATED ALWAYS AS IDENTITY START WITH 99000,
AIRCRAFT        CHAR(6) NOT NULL,
PART            CHAR(10) NOT NULL,
ORDER_JOB       NUMBER(9) NOT NULL,
ORDER_MECHANIC  NUMBER(6) NOT NULL,
ORDER_DATE      DATE NOT NULL,
FULFILLED       CHAR(1) DEFAULT 'N',
PRIMARY KEY (ORDER_NUMBER),
CONSTRAINT FK_ORDER_ACFT FOREIGN KEY (AIRCRAFT) REFERENCES AIRCRAFT(TAIL_NUMBER),
CONSTRAINT FK_ORDER_PART FOREIGN KEY (PART) REFERENCES AIRCRAFT_PARTS(PART_NUMBER),
CONSTRAINT FK_ORDER_JOB FOREIGN KEY (ORDER_JOB) REFERENCES MAINTENANCE(JOB_CONTROL_NUMBER),
CONSTRAINT FK_ORDER_MECH FOREIGN KEY (ORDER_MECHANIC) REFERENCES MECHANIC(EMPLOYEE_ID)
);

/*
INSERT INTO TABLES
*/

-- SKILL table
INSERT INTO SKILL VALUES (1, 'TRAINEE', 'TRAINEE HAS STARTED TECHNICAL TRAINING');
INSERT INTO SKILL VALUES (3,'APPRENTICE', 'GRADUATED SCHOOL, BEGUN ON-THE-JOB-TRAINING');
INSERT INTO SKILL VALUES (5, 'JOURNEYMAN', 'COMPLETED OJT AND PASSED PROFICIENCY');
INSERT INTO SKILL VALUES (7, 'CRAFTSMEN', 'FURTHERED PROFICIENCY, VAST EXPERIENCE IN FIELD');
INSERT INTO SKILL VALUES (9, 'SUPERINTENDENT', 'EXPERT KNOWLEDGE IN FIELD AND OTHER RELATED SPECIALTIES');

-- SPECIALTIES table
INSERT INTO SPECIALTIES VALUES ('2A0X1', 'AVIONICS', 'FLIGHT SYSTEMS MECHANICS');
INSERT INTO SPECIALTIES VALUES ('2A5X4', 'CREW CHIEF', 'GENERAL SYSTEMS MECHANICS');
INSERT INTO SPECIALTIES VALUES ('2A6X3', 'EGRESS', 'EMERGENCY EGRESS/LIFE SUPPORT MECHANICS');
INSERT INTO SPECIALTIES VALUES ('2A6X4', 'FUELS', 'FUEL SYSTEM MECHANICS');
INSERT INTO SPECIALTIES VALUES ('2A6X5', 'HYDRO', 'HYDRAULIC SYSTEM MECHANICS');
INSERT INTO SPECIALTIES VALUES ('2A6X6', 'E&E', 'ELECTRONICS AND ENVIRONMENTAL MECHANICS');
INSERT INTO SPECIALTIES VALUES ('2A7X1', 'MTECH', 'METAL TECHNOLOGY MECHANICS');
INSERT INTO SPECIALTIES VALUES ('2A7X2', 'NDI', 'NON-DESTRUCTIVE INSPECTION MECHANICS');
INSERT INTO SPECIALTIES VALUES ('2A7X3', 'SHEET METAL', 'STRUCTURAL MAINTENANCE MECHANICS');

-- BASE table
INSERT INTO AIRCRAFT_BASES VALUES ('AKFL', 'FAIRCHILD', '4598 FAIRCHILD RD.', 'SEATTLE', 'WA', 51516);
INSERT INTO AIRCRAFT_BASES VALUES ('EJIG', 'HICKAM', '79 COCONUT WAY', 'HONOLULU', 'HI', 65413);
INSERT INTO AIRCRAFT_BASES VALUES ('EJKN', 'GRISSOM', '546 BOOM PLACE', 'PERU', 'IN', 46971);
INSERT INTO AIRCRAFT_BASES VALUES ('FJCI', 'LUKE', '853 LUKE LN.', 'TUSCON', 'AZ', 38545);
INSERT INTO AIRCRAFT_BASES VALUES ('MDOE', 'LACKLAND', '486 MISSERY LN.', 'SAN ANTONIO', 'TX', 68446);
INSERT INTO AIRCRAFT_BASES VALUES ('QPDO', 'BARKSDALE', '5453 MARDIGRAS RD.', 'BOSSIER', 'LA', 55313);
INSERT INTO AIRCRAFT_BASES VALUES ('RODL', 'MINOT', '123 WHYNOT CT.', 'NOWHERE', 'ND', 85133);
INSERT INTO AIRCRAFT_BASES VALUES ('WKOD', 'MACDILL', '49 CHEERIO ST.', 'TAMPA', 'FL', 35151);
INSERT INTO AIRCRAFT_BASES VALUES ('WWLS', 'WHITEMAN', '485 BOMB PLACE', 'WARRENSBURG', 'MO', 65451);

-- AIRCRAFT table
INSERT INTO AIRCRAFT VALUES ('071146', 'F-22', 'Y', 10000, 'AKFL');
INSERT INTO AIRCRAFT VALUES ('090315', 'C-17', 'Y', 10001, 'EJIG');
INSERT INTO AIRCRAFT VALUES ('520955', 'KC-135', 'Y', 10002, 'EJKN');
INSERT INTO AIRCRAFT VALUES ('593598', 'B-52', 'N', 10003, 'FJCI');
INSERT INTO AIRCRAFT VALUES ('686362', 'C-5', 'Y', 10004, 'MDOE');
INSERT INTO AIRCRAFT VALUES ('767950', 'A-10', 'Y', 10005, 'QPDO');
INSERT INTO AIRCRAFT VALUES ('930975', 'F-15', 'Y', 10006, 'RODL');
INSERT INTO AIRCRAFT VALUES ('819108', 'KC-10', 'Y', 10007, 'WKOD');
INSERT INTO AIRCRAFT VALUES ('912459', 'B-1', 'N', 10008, 'WWLS');

-- MECHANIC table
INSERT INTO MECHANIC(FIRST_NAME,LAST_NAME,ASSIGNED_AIRCRAFT,SPECIALTY,SKILL_LEVEL) VALUES ('TONI', 'THEODORA', '071146', '2A5X4', 5); 
INSERT INTO MECHANIC(FIRST_NAME,LAST_NAME,ASSIGNED_AIRCRAFT,SPECIALTY,SKILL_LEVEL) VALUES ('KRYSTELLE', 'FREDRICK', '090315', '2A5X4', 7);
INSERT INTO MECHANIC(FIRST_NAME,LAST_NAME,ASSIGNED_AIRCRAFT,SPECIALTY,SKILL_LEVEL) VALUES ('MAXINE', 'ELEA', '520955', '2A5X4', 7);
INSERT INTO MECHANIC(FIRST_NAME,LAST_NAME,ASSIGNED_AIRCRAFT,SPECIALTY,SKILL_LEVEL) VALUES ('TILLY', 'SHARONA', '593598', '2A5X4', 5);
INSERT INTO MECHANIC(FIRST_NAME,LAST_NAME,ASSIGNED_AIRCRAFT,SPECIALTY,SKILL_LEVEL) VALUES ('ELTON', 'LAURENA', '686362', '2A5X4', 7);
INSERT INTO MECHANIC(FIRST_NAME,LAST_NAME,ASSIGNED_AIRCRAFT,SPECIALTY,SKILL_LEVEL) VALUES ('KENITH', 'PERLIE', '767950', '2A5X4', 7);
INSERT INTO MECHANIC(FIRST_NAME,LAST_NAME,ASSIGNED_AIRCRAFT,SPECIALTY,SKILL_LEVEL) VALUES ('GABRIELLA', 'BRANDIE', '930975', '2A5X4', 7);
INSERT INTO MECHANIC(FIRST_NAME,LAST_NAME,ASSIGNED_AIRCRAFT,SPECIALTY,SKILL_LEVEL) VALUES ('MARTIN', 'DIGBY', '819108', '2A5X4', 7);
INSERT INTO MECHANIC(FIRST_NAME,LAST_NAME,SPECIALTY,SKILL_LEVEL) VALUES ('SOPHIE', 'CLEMENT', '2A0X1', 1);
INSERT INTO MECHANIC(FIRST_NAME,LAST_NAME,SPECIALTY,SKILL_LEVEL) VALUES ('GREG', 'DERRYL', '2A0X1', 7);
INSERT INTO MECHANIC(FIRST_NAME,LAST_NAME,SPECIALTY,SKILL_LEVEL) VALUES ('LUCILE', 'MELVA', '2A6X3', 7);
INSERT INTO MECHANIC(FIRST_NAME,LAST_NAME,SPECIALTY,SKILL_LEVEL) VALUES ('GROVER', 'FLOWER', '2A6X4', 3);
INSERT INTO MECHANIC(FIRST_NAME,LAST_NAME,SPECIALTY,SKILL_LEVEL) VALUES ('VAL', 'CORRIE', '2A6X4', 5);
INSERT INTO MECHANIC(FIRST_NAME,LAST_NAME,SPECIALTY,SKILL_LEVEL) VALUES ('AUSTIN', 'REYNOLDS', '2A6X5', 5);
INSERT INTO MECHANIC(FIRST_NAME,LAST_NAME,SPECIALTY,SKILL_LEVEL) VALUES ('JASON', 'HUMPHREY', '2A6X6', 9);
INSERT INTO MECHANIC(FIRST_NAME,LAST_NAME,SPECIALTY,SKILL_LEVEL) VALUES ('TYSON', 'RIVERA', '2A7X1', 3);
INSERT INTO MECHANIC(FIRST_NAME,LAST_NAME,SPECIALTY,SKILL_LEVEL) VALUES ('HOLLY', 'JONES', '2A7X1', 7);
INSERT INTO MECHANIC(FIRST_NAME,LAST_NAME,SPECIALTY,SKILL_LEVEL) VALUES ('LAUREN', 'HIGA', '2A7X2', 5);
INSERT INTO MECHANIC(FIRST_NAME,LAST_NAME,SPECIALTY,SKILL_LEVEL) VALUES ('TYLER', 'ERICKSON', '2A7X3', 5);
INSERT INTO MECHANIC(FIRST_NAME,LAST_NAME, ASSIGNED_AIRCRAFT, SPECIALTY,SKILL_LEVEL) VALUES ('JOHN', 'PARKER', '912459','2A5X4', 5);

--RUN ALTER TABLE AFTER MECHANIC TABLE CREATED TO ADD FOREIGN KEY ONCE EMPLOYEES ARE POPULATED
ALTER TABLE AIRCRAFT
ADD CONSTRAINT FK_CREWCHIEF
FOREIGN KEY (CREWCHIEF) REFERENCES MECHANIC(EMPLOYEE_ID);

-- MAINTENANCE TABLE
INSERT INTO MAINTENANCE(AIRCRAFT, FIND_MECHANIC, FIND_DATE, ERROR_DESC) VALUES ('593598', 10005, DATE '2022-02-15', 'NOSE LANDING GEAR STRUT LEAKING OUT OF LIMITS. REQ. REPLACEMENT.');
INSERT INTO MAINTENANCE(AIRCRAFT, FIND_MECHANIC, FIND_DATE, ERROR_DESC, FIX_MECHANIC, FIX_DATE, FIX_DESC) VALUES ('090315', 10008, DATE '2022-01-25', 'LT INBD AILERON CONTROL UNIT OUT OF RIG TOLERANCE.', 10009, DATE '2022-01-28', 'RE-RIGGED LT INBD AILERON CONTROL UNIT. OPS CHECKED GOOD.');
INSERT INTO MAINTENANCE(AIRCRAFT, FIND_MECHANIC, FIND_DATE, ERROR_DESC, FIX_MECHANIC, FIX_DATE, FIX_DESC) VALUES ('520955', 10002, DATE '2022-02-18', 'RT INBD SPOILER CONTROL VALVE LEAKING HYDRAULIC FLUID.', 10013, DATE '2022-02-19', 'REMOVED AND REPLACED RT INBD SPOILER CONTROL VALVE. LEAK AND OPS CHECKED GOOD.');
INSERT INTO MAINTENANCE(AIRCRAFT, FIND_MECHANIC, FIND_DATE, ERROR_DESC) VALUES ('912459', 10019, DATE '2022-02-23', 'FUEL DISPLAY NOT READING PROPERLY. REQUIRES EVALUATION.');
INSERT INTO MAINTENANCE(AIRCRAFT, FIND_MECHANIC, FIND_DATE, ERROR_DESC, FIX_MECHANIC, FIX_DATE, FIX_DESC) VALUES ('593598', 10005, DATE '2021-11-18', '#3 AIRCRAFT BRAKE HAS CRACKED HEATSHIELD. BRAKE REQUIRES REPLACEMENT', 10005, DATE '2021-11-19', '#3 AIRCRAFT BRAKE REMOVED AND REPLACED. LEAK AND OPS CHECKED GOOD.');

-- INSPECTION_SCHEDULE table
INSERT INTO INSPECTION_SCHEDULE(AIRCRAFT, DAYS_INTERVAL, DATE_LAST_INSP) VALUES ('593598', 90, DATE '2022-01-28');
INSERT INTO INSPECTION_SCHEDULE(AIRCRAFT, DAYS_INTERVAL, DATE_LAST_INSP) VALUES ('593598',	180, DATE '22-08-21');
INSERT INTO INSPECTION_SCHEDULE(AIRCRAFT, DAYS_INTERVAL, DATE_LAST_INSP) VALUES ('593598',	365, DATE '19-05-21');
INSERT INTO INSPECTION_SCHEDULE(AIRCRAFT, DAYS_INTERVAL, DATE_LAST_INSP) VALUES ('686362',	90,	DATE '14-08-21');
INSERT INTO INSPECTION_SCHEDULE(AIRCRAFT, DAYS_INTERVAL, DATE_LAST_INSP) VALUES ('686362',	180, DATE '02-01-22');
INSERT INTO INSPECTION_SCHEDULE(AIRCRAFT, DAYS_INTERVAL, DATE_LAST_INSP) VALUES ('930975',	90,	DATE '15-02-22');
INSERT INTO INSPECTION_SCHEDULE(AIRCRAFT, DAYS_INTERVAL, DATE_LAST_INSP) VALUES ('819108',	90,	DATE '14-01-22');
INSERT INTO INSPECTION_SCHEDULE(AIRCRAFT, DAYS_INTERVAL, DATE_LAST_INSP) VALUES ('819108',	365, DATE '12-09-21');

-- AIRCRAFT PARTS
INSERT INTO AIRCRAFT_PARTS VALUES ('3878-97901', 'LANDING GEAR DOOR ACTUATOR', 'THE ACTUATING UNITS THAT OPEN AND CLOSE THE LANDING GEAR DOORS. POSITION ON THE AIRCRAFT (NOSE, LEFT, OR RIGHT MAIN) SHOULD BE SHOWN IN THE "PART LOCATION" FIELD.', 5432.60);
INSERT INTO AIRCRAFT_PARTS VALUES ('2534-46960', 'AIR DATA COMPUTER', 'THE COMPUTER AND ITS INTEGRAL PARTS WHICH RECEIVES DATA FROM VARIOUS ENVIRONMENTAL SENSING SYSTEMS, COMPUTES THIS DATA, AND MAKES IT AVAILABLE TO THE VARIOUS NAVIGATION SYSTEMS.', 9782.3);
INSERT INTO AIRCRAFT_PARTS VALUES ('9957-31581', 'DRAG CONTROL ACTUATOR', 'THE COMPONENTS THAT ACTUATES SPOILER AND SPEED BRAKE SURFACES ON THE WING FOR SPEED AND LIFT REDUCING PURPOSES. TYPICAL PARTS ARE SEAL, ROD END BEARING, ROD END, ETC.', 4288);
INSERT INTO AIRCRAFT_PARTS VALUES ('3006-05287', 'AILERON CONTROL UNIT', 'THE ACTUATING UNITS THAT OPEN AND CLOSE THE AILERONS. POSITION ON THE AIRCRAFT (NOSE, LEFT, OR RIGHT MAIN) SHOULD BE SHOWN IN THE "PART LOCATION" FIELD.', 7846.2);
INSERT INTO AIRCRAFT_PARTS VALUES ('6879-41221', 'HYDRAULIC PRESSURE RELIEF VALVE', 'THE UNIT WHICH RELIEVES SYSTEM RELIEF PRESSURE AT A PRESET PRESSURE. TYPICAL PARTS ARE SEAL, SPRING, HOUSING, RELIEF VALVE, ETC.', 800.68);
INSERT INTO AIRCRAFT_PARTS VALUES ('6524-54069', 'HYDRAULIC PRESSURE SENSOR', 'THE COMPONENTS THAT SENSE SYSTEM PRESSURE AND TRANSMIT A SIGNAL TO THE COCKPIT INDICATOR OR LOW PRESSURE WARNING LAMP. TYPICAL PARTS ARE TRANSMITTER, PRESSURE SWITCH, SENSOR, ETC.', 90.3);
INSERT INTO AIRCRAFT_PARTS VALUES ('4901-18083', 'FUEL PRESSURE SENSOR', 'THE UNITS WHICH SENSE AND TRANSMIT TO THE COCKPIT INDICATOR OR INDICATOR LAMPS, THE PRESSURE OF FUEL AVAILABLE AT THE ENGINE FUEL CONTROL/CARBURETOR.', 208); 
INSERT INTO AIRCRAFT_PARTS VALUES ('7891-53118', 'NOSE LANDING GEAR STRUT', 'THE NOSE GEAR COMPONENT PARTS SUCH AS SHOCK STRUTS AND AXLES, WHICH SUPPORT THE AIRCRAFT ON THE GROUND. TORQUE LINKS ARE INCLUDED.', 20685.8);

-- ORDER_PARTS
INSERT INTO ORDER_PARTS(AIRCRAFT, PART, ORDER_JOB, ORDER_MECHANIC, ORDER_DATE, FULFILLED) VALUES ('593598', '7891-53118', 202200001, 10013,DATE '2022-02-15', 'Y');
INSERT INTO ORDER_PARTS(AIRCRAFT, PART, ORDER_JOB, ORDER_MECHANIC, ORDER_DATE) VALUES ('090315', '3006-05287', 202200002, 10009,DATE '2022-01-26');
INSERT INTO ORDER_PARTS(AIRCRAFT, PART, ORDER_JOB, ORDER_MECHANIC, ORDER_DATE, FULFILLED) VALUES ('686362', '2534-46960', 202200003, 10015,DATE '2021-08-15', 'Y');
INSERT INTO ORDER_PARTS(AIRCRAFT, PART, ORDER_JOB, ORDER_MECHANIC, ORDER_DATE, FULFILLED) VALUES ('593598', '7891-53118', 202200005, 10013,DATE '2022-01-15', 'Y');

-- REQUEST TYPE
INSERT INTO REQUEST_TYPE VALUES (1, 'ADD EMPLOYEE TO WORK CENTER');
INSERT INTO REQUEST_TYPE VALUES (2, 'REMOVE EMPLOYEE FROM WORK CENTER');
INSERT INTO REQUEST_TYPE VALUES (3, 'DELETE AIRCRAFT JOB FROM SYSTEM');

--ANALYSIST REQUEST
INSERT INTO ANALYSIST_REQUEST VALUES (REQUEST_SEQ.NEXTVAL, 10000, 3, 'PLEASE DELETE JOB #202200024. JOB WAS ENTERED IN ERROR AND DOES NOT REQUIRE REPAIR.');

---------------------------------------
DROP INDEX MECHANIC_NAME;       --#18 INDEX ON NAME BECAUSE THERE MAY BE A LOT OF REPEATING NAMES ONCE DATABASE GROWS. WILL SPEED UP QUERIES
CREATE INDEX MECHANIC_NAME ON MECHANIC (LAST_NAME, FIRST_NAME);

--VIEW 1
DROP VIEW BASE_YEARLY_ORDER_SUMMARY;
CREATE VIEW BASE_YEARLY_ORDER_SUMMARY
AS SELECT BASE, SUM(PART_COST) AS TOT_COST      --#6 SUM NUMBER FUNCTION
FROM AIRCRAFT, AIRCRAFT_PARTS, ORDER_PARTS
WHERE AIRCRAFT.TAIL_NUMBER = ORDER_PARTS.AIRCRAFT
AND  AIRCRAFT_PARTS.PART_NUMBER = ORDER_PARTS.PART
AND EXTRACT(YEAR FROM TO_DATE(ORDER_PARTS.ORDER_DATE)) = EXTRACT(YEAR FROM CURRENT_DATE)    --#7 TO_DATE AND DATE EXTRACT
GROUP BY BASE
ORDER BY BASE;

SELECT * FROM BASE_YEARLY_ORDER_SUMMARY;

-- VIEW 2
CREATE TABLE CAPABLE_AIRCRAFTS      -- #16 CREATE TABLE FROM ANOTHER
    AS (SELECT TAIL_NUMBER, MISSION_CAPABLE
        FROM AIRCRAFT
        WHERE MISSION_CAPABLE = 'Y');

DROP VIEW MISSION_CAPABILITY;
CREATE VIEW MISSION_CAPABILITY AS
SELECT (((SELECT COUNT(TAIL_NUMBER) FROM CAPABLE_AIRCRAFTS) / (SELECT COUNT(TAIL_NUMBER) FROM AIRCRAFT) * 100)) AS MISSION_CAPABILITY   --#6 AND 10 NUMBER FUNCTION AND SUBQUERY
FROM CAPABLE_AIRCRAFTS
GROUP BY MISSION_CAPABLE;              -- #9 GROUP BY

SELECT * FROM MISSION_CAPABILITY;

-- VIEW 3
DROP VIEW AIRCRAFT_LOCATIONS;
CREATE VIEW AIRCRAFT_LOCATIONS AS
SELECT TAIL_NUMBER, RPAD(AIRCRAFT_BASES.BASE_NAME, 12, ' ') AS BASE, RPAD(AIRCRAFT_BASES.STREET_ADDRESS, 20, ' ') AS STREET, RPAD(AIRCRAFT_BASES.BASE_CITY, 12, ' ') AS CITY, AIRCRAFT_BASES.BASE_STATE, AIRCRAFT_BASES.BASE_ZIP    -- #5 STRING FUNCTIONS
FROM AIRCRAFT
INNER JOIN AIRCRAFT_BASES                           -- #11 INNER JOIN
ON AIRCRAFT.BASE = AIRCRAFT_BASES.BASE_CODE;

SELECT * FROM AIRCRAFT_LOCATIONS;

-- VIEW 4
DROP VIEW OUTSTANDING_MAINTENANCE;
CREATE VIEW OUTSTANDING_MAINTENANCE       
AS SELECT JOB_CONTROL_NUMBER, AIRCRAFT, FIND_MECHANIC, FIND_DATE, ERROR_DESC, DECODE(FIX_MECHANIC, NULL, 'MAINTENANCE OUTSTANDING', 'COMPLETE') AS STATUS       -- #8 DECODE
FROM MAINTENANCE
WHERE FIX_MECHANIC IS NULL;

SELECT * FROM OUTSTANDING_MAINTENANCE;

-- VIEW 5
DROP VIEW MECHANIC_7LEVELS;
CREATE VIEW MECHANIC_7LEVELS 
AS SELECT * 
FROM MECHANIC
WHERE SKILL_LEVEL = 7;

SELECT * FROM MECHANIC_7LEVELS;

DELETE FROM MECHANIC_7LEVELS
WHERE ASSIGNED_AIRCRAFT IS NULL     -- #13 DELETE AND INSERT THROUGH VIEW #15 MORE THAN ONE CONDITION IN WHERE CLAUSE
    AND FIRST_NAME = 'LUCILE';
    
INSERT INTO MECHANIC_7LEVELS(FIRST_NAME,LAST_NAME,SPECIALTY,SKILL_LEVEL) VALUES ('LUCILE', 'MELVA', '2A6X3', 7);